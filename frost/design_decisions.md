# FROST 设计决策清单

> 用于定稿 `design_v2.md`，请逐项填写决策结果。
> 完成后通知我，我会根据你的决策批量更新设计文档。

---

## 使用说明

- **状态**：`[ ]` 待定 → `[x]` 已决策
- **决策**：填写你的最终选择
- **备注**：可选，补充说明

---

## 🔴 类别一：建议/推荐（需确认是否采纳）


### 14. 配置文件路径
- **位置**：10 L559
- **原文**：`建议 frost/config/default.json`
- **需决策**：确认配置文件路径与格式
- [ ] **决策**：_______________
- **备注**：

### 15. 实现顺序
- **位置**：13 L620
- **原文**：`实现计划（建议）`
- **需决策**：确认实现顺序是否按文档所述？
- [ ] **决策**：[ ] 按文档顺序  [ ] 调整为：_______________
- **备注**：

### 16. 现有代码迁移方案
- **位置**：15 L685-688
- **原文**：`迁移建议：整体移动到 frost/core/*`
- **需决策**：确认迁移方案
- [ ] **决策**：[ ] 按建议迁移  [ ] 保持现状  [ ] 其他：___
- **备注**：



---

## 🟠 类别二：可选功能（需确认是否纳入 v1）

### 17. CPFP 支持
- **位置**：1.1 L45 + 7.3 L420
- **原文**：`支持 CPFP（可选）`、`v1+（可选）：用 CPFP`
- **需决策**：v1 是否支持 CPFP（Child-Pays-For-Parent）？
- [ ] **决策**：[ ] v1 支持  [ ] v1 不支持，v2 再做
- **备注**：

### 18. FrostEnvelope 消息签名
- **位置**：8.2 L495
- **原文**：`Sig []byte // 可选：消息签名（防伪造/重放）`
- **需决策**：FrostEnvelope 是否强制携带签名？
- [ ] **决策**：[ ] 强制  [ ] 可选  [ ] 不需要
- **备注**：

### 19. 状态机 sig 相关字段
- **位置**：8.5 L527
- **原文**：`(可选)primary_sig_ref/sig_count`
- **需决策**：WithdrawRequest 状态机是否包含这些字段？
- [ ] **决策**：[ ] 包含  [ ] 不包含
- **备注**：

### 20. GetAllWithdrawSignInfo API
- **位置**：9.1 L546
- **原文**：`GetAllWithdrawSignInfo（可选）`
- **需决策**：v1 是否实现此 API？
- [ ] **决策**：[ ] v1 实现  [ ] v1 不实现
- **备注**：

### 21. 参与者并发发送 share
- **位置**：12 L616
- **原文**：`可选：参与者把 share 同时发给下一候选聚合者（v2 优化）`
- **需决策**：v1 是否提前实现？
- [ ] **决策**：[ ] v1 实现  [ ] v2 再做
- **备注**：


---

## 🟡 类别三：二选一/多选一

### 22. Top10000 存储方式
- **位置**：4.2 L202
- **原文**：`公钥/NodeID 列表或其 merkle root（视你现有存储）`
- **需决策**：存完整列表还是只存 merkle root？
- [ ] **决策**：[ ] 完整列表  [ ] merkle root  [ ] 两者都存
- **备注**：

### 23. committee 引用方式
- **位置**：4.3.3 L244
- **原文**：`old_committee_ref / new_committee_ref（或 seed+规则）`
- **需决策**：存直接引用还是存 seed+派生规则？
- [ ] **决策**：[ ] 直接引用  [ ] seed+规则
- **备注**：

### 24. 聚合者切换依据
- **位置**：5.3.3 L318
- **原文**：`（或基于"观察到的链上状态推进高度"）`
- **需决策**：聚合者切换用本地时间还是链上高度？
- [ ] **决策**：[ ] 本地时间  [ ] 链上高度
- **备注**：

### 25. 触发条件类型
- **位置**：6.1 L337
- **原文**：`或按治理参数：change_ratio >= transitionTriggerRatio`
- **需决策**：触发条件用固定值还是治理参数？
- [ ] **决策**：[ ] 固定值  [ ] 治理参数
- **备注**：

### 26. BTC 轮换策略
- **位置**：6.3 L365-369
- **原文**：`BTC：两种 v1 方案（任选一种先落地）`
- **需决策**：BTC 轮换采用哪种方案？
- [ ] **决策**：[ ] 方案1：迁移 UTXO  [ ] 方案2：只更新签名者（不适用原生地址）
- **备注**：

### 27. SignerSetProvider 数据源
- **位置**：8.1 L480-481
- **原文**：`从 VM/状态机存的 miner 数据读（推荐）或从共识层已落盘的 validator set 读`
- **需决策**：数据源选择
- [ ] **决策**：[ ] VM/状态机  [ ] 共识层 validator set
- **备注**：

### 28. GetTopSigners API 返回格式
- **位置**：9.1 L539
- **原文**：`Top10000 signer 列表（或其摘要 + 分页）`
- **需决策**：API 返回完整列表还是摘要+分页？
- [ ] **决策**：[ ] 完整列表  [ ] 摘要+分页  [ ] 都支持
- **备注**：

### 29. GetTxSignInfo 返回格式
- **位置**：9.1 L545
- **原文**：`聚合签名结果（或其 hash + 存储引用）`
- **需决策**：返回原始签名还是引用？
- [ ] **决策**：[ ] 原始签名  [ ] hash+引用  [ ] 都支持
- **备注**：

### 30. 合约验签方式
- **位置**：6.3 L361
- **原文**：`验证门限签名（或验证聚合签名对应 pubkey）`
- **需决策**：合约验证方式
- [ ] **决策**：[ ] 验证门限签名  [ ] 验证聚合签名对应 pubkey
- **备注**：


---

## 🔵 类别四：数值参数确认

### 31. activeN（活跃委员会人数）
- **位置**：配置 L565
- **当前值**：`1000`
- [ ] **确认**：[ ] 保持 1000  [ ] 修改为：___
- **备注**：

### 32. thresholdRatio（门限比例）
- **位置**：配置 L566
- **当前值**：`0.8`
- [ ] **确认**：[ ] 保持 0.8  [ ] 修改为：___
- **备注**：

### 33. epochBlocks（epoch 块数）
- **位置**：配置 L567
- **当前值**：`200`
- [ ] **确认**：[ ] 保持 200  [ ] 修改为：___
- **备注**：

### 34. nonceCommitMs（Nonce 承诺超时）
- **位置**：配置 L569
- **当前值**：`2000` ms
- [ ] **确认**：[ ] 保持  [ ] 修改为：___ ms
- **备注**：

### 35. sigShareMs（签名份额超时）
- **位置**：配置 L570
- **当前值**：`3000` ms
- [ ] **确认**：[ ] 保持  [ ] 修改为：___ ms
- **备注**：

### 36. aggregatorRotateMs（聚合者轮换超时）
- **位置**：配置 L571
- **当前值**：`5000` ms
- [ ] **确认**：[ ] 保持  [ ] 修改为：___ ms
- **备注**：

### 37. sessionMaxMs（会话最大时长）
- **位置**：配置 L572
- **当前值**：`60000` ms
- [ ] **确认**：[ ] 保持  [ ] 修改为：___ ms
- **备注**：

### 38. maxInFlightPerChain（每链最大并发提现）
- **位置**：配置 L575
- **当前值**：`50`
- [ ] **确认**：[ ] 保持  [ ] 修改为：___
- **备注**：

### 39. maxRetry（最大重试次数）
- **位置**：配置 L576
- **当前值**：`5`
- [ ] **确认**：[ ] 保持  [ ] 修改为：___
- **备注**：

### 40. backoffMs（重试退避时间）
- **位置**：配置 L576
- **当前值**：`5000` ms
- [ ] **确认**：[ ] 保持  [ ] 修改为：___ ms
- **备注**：

### 41. triggerChangeRatio（触发轮换比例）
- **位置**：配置 L579
- **当前值**：`0.2`
- **注意**：与 #9 相关，需保持一致
- [ ] **确认**：[ ] 保持 0.2  [ ] 修改为：___
- **备注**：

### 42. 各链 Gas/Fee 参数
- **位置**：配置 L583-588
- **当前值**：
  - BTC: `feeSatsPerVByte: 25`
  - ETH: `gasPriceGwei: 30, gasLimit: 180000`
  - BNB: `gasPriceGwei: 3, gasLimit: 180000`
  - TRX: `feeLimitSun: 30000000`
  - SOL: `priorityFeeMicroLamports: 2000`
- [ ] **确认**：[ ] 保持  [ ] 修改（请在备注中说明）
- **备注**：

---

## ⚪ 类别五：措辞澄清

### 43. "尽量复用"明确化
- **位置**：1.1 L41
- **原文**：`尽量复用现有工程抽象`
- **需决策**：改为强制规定还是保持弹性？
- [ ] **决策**：[ ] 强制复用  [ ] 保持"尽量"  [ ] 其他：___
- **备注**：

### 44. 切换窗口行为
- **位置**：1.1 L53
- **原文**：`可设计为"只在关键切换窗口短暂停顿/降速"`
- **需决策**：暂停、降速、还是都支持？
- [ ] **决策**：[ ] 暂停  [ ] 降速  [ ] 都支持（可配置）
- **备注**：

### 45. BTC 归集与分批迁移
- **位置**：6.3 L369
- **原文**：`可配合"归集策略 + 分批迁移"`
- **需决策**：v1 是否支持归集与分批迁移？
- [ ] **决策**：[ ] 支持  [ ] 不支持，后续版本
- **备注**：

---

## 📊 完成进度

| 类别 | 总数 | 已决策 |
|------|------|--------|
| 建议/推荐 | 16 | 0 |
| 可选功能 | 5 | 0 |
| 二选一/多选一 | 9 | 0 |
| 数值参数 | 12 | 0 |
| 措辞澄清 | 3 | 0 |
| **总计** | **45** | **0** |

---

## ✅ 决策完成后

请在所有项目填写完毕后通知我，我会：
1. 根据你的决策批量更新 `design_v2.md`
2. 移除所有"建议"、"可选"、"或"等模糊表述
3. 将文档改为确定性的设计规范
