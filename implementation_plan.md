# Bug 分析：Snowball 共识非连续最终化

## 问题描述
用户反馈在 `total_votes` 只有 13 票（且只有 12 票支持）的情况下，区块完成了最终化。用户预期需要“连续 15 个确认”。

经过代码审计，发现了以下问题：
1.  **Snowball 置信度未重置**：在 `consensus/snowball.go` 的 `RecordVote` 方法中，当某轮查询的票数未达到 `Alpha` 阈值时，程序只是简单地跳过，而没有将 `confidence`（置信度计数）清零。这意味着置信度是“累积”的而非“连续”的。一旦网络出现抖动导致部分轮次失败，旧的信心值依然被保留，导致最终化条件被错误触发。
2.  **配置不一致**：在 `cmd/main/node.go` 中，为了开发便利，将 `Beta`（最终化所需的连续成功轮数）从默认的 15 覆盖为了 10，这与用户的“15个确认”预期不符。
3.  **Alpha 阈值过低**：在采样大小 $K=15$ 的情况下，$Alpha=12$ 导致仅需 12 票即可让信心增加。如果此时网络只收到 13 票且全部正确，虽然逻辑上合理，但在低采样率下依然推进共识可能降低安全性。

## 修复方案
1.  **修正 Snowball 核心算法**：在 `consensus/snowball.go` 中增加逻辑，当任何一轮查询无法产生满足 `Alpha` 的多数派时，强制将 `confidence` 重置为 0。
2.  **对齐共识参数**：修改 `cmd/main/node.go`，将 `Beta` 恢复为 15，并将相关的 $K$ 和 $Alpha$ 参数调回更安全的值。

## 实施计划
1.  修改 `consensus/snowball.go` 实现置信度重置。
2.  修改 `cmd/main/node.go` 调整共识参数。
3.  验证逻辑一致性。
